{

"activities": [

  { "id": "generate-list",
    "job": {
         "Executable": "echo",
         "Arguments": [ "wf:/file_list"],
          "Exports": [
	          {"From": "stdout", "To": "wf:/file_list"},
	      ],
    }
  }

],

"subworkflows": [

{
   "id": "for1", "type": "FOR_EACH",
   "iterator_name": "IT",

   "body":
   {
     "activities": [

       {
         "id": "job",
         "job": {
             "Executable": "echo",
             "Arguments": [ "processing ", "$NAME"],
	         "Environment": ["NAME=${IT_FILENAME}"],
             "Imports": [
               {"From": "${IT_VALUE}", "To": "infile"},
             ],
             "Exports": [
	            {"From": "stdout", "To": "wf:/out_${IT}"},
	         ],
	      }
       },

      ],

    },

    "filesets": [
      {
         "indirection": "true",
         "base": "wf:/",
	     "include": ["file_list"],
      }
    ],
}
],

"transitions": [ {"from": "generate-list", "to": "for1" }, ]

}
